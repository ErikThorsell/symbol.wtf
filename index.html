<!DOCTYPE html>

<head>
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:description" content="Dumb website for copying symbols." />
  <meta name="twitter:title" content="symbol.wtf" />
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="symbols.css" />
  <script src="./symbols.js"></script>

  <script>
    function renderSymbols(searchTerm = "") {
      const parent = document.querySelector(".symbols");
      searchTerm = searchTerm.toLowerCase();
      parent.innerHTML = "";
      for (const symbolInfo of symbols) {
        symbolSearchTerms = symbolInfo.searchTerms.join(" ");
        if (searchTerm !== "" && !symbolSearchTerms.toLowerCase().includes(searchTerm)) {
          continue;
        }
        const elem = document.createElement("div");
        elem.classList = "symbol";
        /* If display is false, show an empty box. */
        elem.textContent = symbolInfo.display !== false ? symbolInfo.glyph : "\u25A1";
        elem.addEventListener("click", () => {
          if (elem.classList.contains("symbol-clicked")) return;

          const symbol = elem.textContent;
          navigator.clipboard.writeText(symbol);

          elem.textContent = "Copied!";
          elem.classList.remove("symbol");
          elem.classList.add("symbol-clicked");

          setTimeout(() => {
            elem.textContent = symbolInfo.glyph;
            elem.title = symbolInfo.name;
            elem.classList.remove("symbol-clicked");
            elem.classList.add("symbol");
          }, 1000);
        });
        parent.appendChild(elem);
      }
    }

    function setSearchListener() {
      const searchInput = document.querySelector(".search input");
      searchInput.addEventListener("input", (e) => {
        const searchTerm = e.target.value;
        renderSymbols(searchTerm);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderSymbols();
      setSearchListener();
    });
  </script>
</head>

<body>
  <div class="search">
    <input type="text" autofocus placeholder="Search..." />
  </div>
  <div class="symbols"></div>
</body>
